{% extends 'layout.html' %} {% block title %}Posts{% endblock %} 

{% block content %}
	<h2>Posts Page</h2>
	{% for post in post_details %}
		<div class="container">
			<div class="my-2 box">
				<form>
					<article class="media content-section">
						<div class="media-body">
							<div class="article-metadata">
								<a class="mr-2" href="#">{{ post['username'] }}</a>
								<small class="text-muted">{{ post['date_posted'].strftime('%Y-%m-%d') }}</small>
							</div>
							<h2><a class="article-title" href="#">{{ post['title'] }}</a></h2>
							<p class="article-content">{{ post['content'] }}</p>
						</div>
					</article>
					<br />
					<div class="btn-toolbar">
						<a href="/update/{{ post['id'] }}"><button type="button" class="btn btn-primary btn-sm mr-2">Update Post</button></a>
						<!-- <a href="/delete/{{ post['id'] }}"><button onclick="return confirm('Are you sure you want to delete this post?');" type="button" class="btn btn-danger btn-sm">Delete Post</button></a> -->
						<button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#exampleModal">Delete Post</button>
					</div>
					<br>
					<a href="#myModal{{ post['id'] }}" class="btn btn-sm btn-primary" data-toggle="modal">Post a comment</a>
					<div id="myModal{{ post['id'] }}" class="modal fade">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title d-inline-block">Your comment</h5>
									<button type="button" class="close  d-inline-block" data-dismiss="modal">&times;</button>
								</div>
								<div class="modal-body">
									<form method="POST" action="">
										<input type="hidden" name="postID" id="postID_input" value="{{ post['id'] }}/>
										<div class="form-group">
											<label for="inputName">Name</label>
											<a class="mr-2" href="#">{{ username }}</a>
										</div>
										<div class="form-group">
											<label for="inputComment">Comments</label>
											<textarea class="form-control" id="inputComment" rows="5"></textarea>
										</div>
									</form>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
									<button type="submit" class="btn btn-primary">Send</button>
								</div>
							</div>	
						</div>						
					</div>
						
					<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLabel">Delete Post</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span></button>
								</div>
								<div class="modal-body">
									Are you sure you want to delete this post ?
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primary" data-dismiss="modal">
										NO
									</button>
									<a href="/delete/{{ post['id'] }}"><button type="button" class="btn btn-danger">YES</button></a>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	{% endfor %} 
{% endblock %}
